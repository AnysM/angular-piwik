"use strict";angular.module("pxmPiwik",[]),angular.module("pxmPiwik").config(["$provide",function(a){function b(){var a="json",b="en",c="anonymous",d="http://demo.piwik.org/",e="http://demo.piwik.org/",f="http://demo.piwik.org/";this.setFormat=function(b){a=b},this.setLanguage=function(a){b=a},this.setToken=function(a){c=a},this.setUrl=function(a){d=a,e=a,f=a},this.setUrlApi=function(a){d=a},this.setUrlTracker=function(a){e=a},this.setUrlWidget=function(a){f=a},this.$get=["$http",function(e){var g={},h={};return g.call=function(){var a;if(a=1===arguments.length&&angular.isArray(arguments[0][0])?arguments[0]:2===arguments.length&&angular.isString(arguments[0])?[[arguments[0],arguments[1]]]:Array.prototype.slice.call(arguments),!(a.length<1)){if(1===a.length)return h.apiCall(h.methodParams(a[0]));var b={method:"API.getBulkRequest",urls:[]};return angular.forEach(a,function(a){this.push(h.paramSerializer(h.methodParams(a)))},b.urls),h.apiCall(b)}},g.widget=function(a,d){return h.buildUrl(f,angular.extend({action:"iframe",actionToWidgetize:a.split(".")[1],disableLink:1,language:b,module:"Widgetize",moduleToWidgetize:a.split(".")[0],token_auth:c,widget:1},d))},h.apiCall=function(c){return e.get(h.buildUrl(d,angular.extend({format:a,language:b,module:"API"},c)))},h.buildUrl=function(a,b){return a+(-1===a.indexOf("?")?"?":"&")+h.paramSerializer(b)},h.methodParams=function(a){return angular.extend({method:a[0],token_auth:c},a[1])},h.paramSerializer=function(a){if(!a)return"";var b=[];return angular.forEach(a,function(a,c){return null===a||angular.isUndefined(a)?void 0:angular.isArray(a)||angular.isObject(a)?void angular.forEach(a,function(a,d){b.push(encodeURIComponent(c+"["+d+"]")+"="+encodeURIComponent(h.serializeValue(a)))}):void b.push(encodeURIComponent(c)+"="+encodeURIComponent(h.serializeValue(a)))}),b.length>0?b.join("&"):""},h.serializeValue=function(a){return angular.isObject(a)?angular.isDate(a)?a.toISOString():angular.toJson(a):a},g}]}a.provider("$piwik",b)}]);