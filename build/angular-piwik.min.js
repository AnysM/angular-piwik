"use strict";angular.module("pxmPiwik",[],["$provide",function(a){a.constant("piwikFormat","json"),a.constant("piwikLanguage","en"),a.constant("piwikToken","anonymous"),a.constant("piwikUrl","http://demo.piwik.org/"),a.factory("$piwik",["$http","piwikFormat","piwikLanguage","piwikToken","piwikUrl",function(a,b,c,d,e){var f={},g={};return f.format=b,f.language=c,f.token=d,f.url=e,f.call=function(){var a;if(a=1===arguments.length&&arguments[0][0].constructor===Array?arguments[0]:2===arguments.length&&arguments[0].constructor===String?[[arguments[0],arguments[1]]]:Array.prototype.slice.call(arguments),!(a.length<1)){if(1===a.length)return g.apiCall(g.methodParams(a[0]));var b={method:"API.getBulkRequest",urls:[]};return angular.forEach(a,function(a){this.push(g.buildQuery(g.methodParams(a)))},b.urls),g.apiCall(b)}},g.apiCall=function(b){return a.get(f.url,{params:angular.extend({format:f.format,module:"API"},g.tidyParams(b))})},g.buildQuery=function(a){var b=[];return angular.forEach(g.tidyParams(a),function(a,b){this.push(b+"="+a)},b),b.join("&")},g.methodParams=function(a){return angular.extend({language:f.language,method:a[0],token_auth:f.token},a[1])},g.tidyParams=function(a){return angular.forEach(a,function(a,b){if(a.constructor!==Array)return void(this[b]=a);delete this[b];for(var c in a)this[b+"["+c+"]"]=a[c]},a),a},f}])}]);