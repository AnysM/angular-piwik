"use strict";angular.module("pxmPiwik",[]).config(["$provide",function(a){a.constant("piwikFormat","json"),a.constant("piwikLanguage","en"),a.constant("piwikToken","anonymous"),a.constant("piwikUrl","http://demo.piwik.org/"),a.factory("$piwik",["$http","piwikFormat","piwikLanguage","piwikToken","piwikUrl",function(a,b,c,d,e){var f={},g={};return f.format=b,f.language=c,f.token=d,f.urlApi=e,f.urlWidget=e,f.call=function(){var a;if(a=1===arguments.length&&angular.isArray(arguments[0][0])?arguments[0]:2===arguments.length&&angular.isString(arguments[0])?[[arguments[0],arguments[1]]]:Array.prototype.slice.call(arguments),!(a.length<1)){if(1===a.length)return g.apiCall(g.methodParams(a[0]));var b={method:"API.getBulkRequest",urls:[]};return angular.forEach(a,function(a){this.push(g.paramSerializer(g.methodParams(a)))},b.urls),g.apiCall(b)}},f.widget=function(a,b){return g.buildUrl(f.urlWidget,angular.extend({action:"iframe",actionToWidgetize:a.split(".")[1],disableLink:1,language:f.language,module:"Widgetize",moduleToWidgetize:a.split(".")[0],token_auth:f.token,widget:1},b))},g.apiCall=function(b){return a.get(g.buildUrl(f.urlApi,angular.extend({format:f.format,language:f.language,module:"API"},b)))},g.buildUrl=function(a,b){return a+(-1===a.indexOf("?")?"?":"&")+g.paramSerializer(b)},g.methodParams=function(a){return angular.extend({method:a[0],token_auth:f.token},a[1])},g.paramSerializer=function(a){if(!a)return"";var b=[];return angular.forEach(a,function(a,c){return null===a||angular.isUndefined(a)?void 0:angular.isArray(a)||angular.isObject(a)?void angular.forEach(a,function(a,d){b.push(encodeURIComponent(c+"["+d+"]")+"="+encodeURIComponent(g.serializeValue(a)))}):void b.push(encodeURIComponent(c)+"="+encodeURIComponent(g.serializeValue(a)))}),b.length>0?b.join("&"):""},g.serializeValue=function(a){return angular.isObject(a)?angular.isDate(a)?a.toISOString():angular.toJson(a):a},f}])}]);